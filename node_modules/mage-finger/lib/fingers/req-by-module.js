
var request = require('../util/simplerequest').simplerequest;
var mageVersions = require('../util/mage-version').versions;

exports.version = '0.1.0';
exports.code = 'req-by-module';

exports.run = function(target, oncomplete) {
    target.path = '/Mage_Cms';

    request(target, function(response) {
        var versions = [];
        var matches = response.match(/cms-home/);
        if (matches) {
            versions = mageVersions.getVersionsLowerThen('1.6.0.0');
        } else {
            versions = mageVersions.getVersionsHigherThen('1.6.0.0', true);
        }
        oncomplete(exports.code, versions);
    });
}